---
title: 'Redux, Redux Tool Kit'
date: '2023-09-24'
description: 'Redux ì •ì˜, Redux & RTKì˜ ì‚¬ìš©ë²•'
category: 'Library'
thumbnail: '/thumbnail/redux.jpg'
---

## ëª©ì°¨

# ğŸ› ï¸Â Redux (Vanilia JS)

```bash
npm install redux
```

## Stateì˜ ì¢…ë¥˜

1. **Local State**: ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì†Œìœ í•˜ê³  ìˆëŠ” ìƒíƒœë¥¼ ì˜ë¯¸. 
2. **Cross-Component State**: ë‘ ê°œ ì´ìƒì˜ ì»´í¬ë„ŒíŠ¸ ê°„ì— ê³µìœ ë˜ëŠ” ìƒíƒœë¥¼ ì˜ë¯¸
3. **App-Wide State**: ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ì˜ì—­ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœ. ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸, í˜¹ì€ ì•±ì˜ ì „ì²´ ì˜ì—­ì—ì„œ ê³µìœ ë˜ì–´ì•¼ í•˜ëŠ” ë°ì´í„°ë‚˜ ìƒíƒœì— ì‚¬ìš©ë¨

<span className='highlight'>Cross-component, App-Wide State ì¼ ë•Œ Context API ë‚˜ Reduxê°€ ìš”êµ¬ëœë‹¤.</span>

## Redux?

- <span className='highlight'>Javascript</span> ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë¦¬ì•¡íŠ¸ë¥¼ ë°°ìš¸ ë•Œ ë§ì´ ë‚˜ì˜¤ëŠ” ìš©ì–´ì§€ë§Œ, ê¼­ ë¦¬ì•¡íŠ¸ì— ì¢…ì†ë˜ëŠ” ê°œë…ì€ ì•„ë‹ˆë‹¤.
- ë¦¬ì•¡íŠ¸ì˜ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœë‹¤.
- ì‚¬ìš© ì‹œ ì „ì—­ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì–´ stateë¥¼ propsë¡œ ì „ë‹¬.. ì „ë‹¬.. ì „ë‹¬.. í•˜ì§€ ì•Šê³ , storeë¼ëŠ” ê³³ì—ì„œ ì–¸ì œë“ ì§€ êº¼ë‚´ ì“¸ ìˆ˜ ìˆë‹¤.

<div className='flex justify-center'>![redux1](https://github.com/cheolung12/blog-static/assets/109952479/07aaba1b-29c6-4e02-bd55-dd1221233f83)</div>

## Redux êµ¬ì„±

![redux2](https://github.com/cheolung12/blog-static/assets/109952479/b23f36eb-f6ea-4690-a4b7-37d987c63210)


### 1. Store

- ìƒíƒœê°€ ê´€ë¦¬ë˜ëŠ” ì˜¤ì§í•˜ë‚˜ì˜ ê³µê°„
- ìŠ¤í† ì–´ ì•ˆì—ëŠ” í˜„ì¬ ì—í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœì™€ ë¦¬ë“€ì„œê°€ ë“¤ì–´ê°€ ìˆë‹¤.
- <span className='yellow-bold'>í•œ ê°œì˜ í”„ë¡œì íŠ¸ëŠ” ë‹¨ í•˜ë‚˜ì˜ ìŠ¤í† ì–´ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</span>
- <span className='yellow-bold'>ìŠ¤í† ì–´ì— ìˆëŠ” ë°ì´í„°ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©ì— ì¡°ì‘</span>

### 2. Action

- ìƒíƒœì— ì–´ë– í•œ ë³€í™”ê°€ í•„ìš”í•˜ë©´ ì•¡ì…˜ì´ ë°œìƒ
- ì»´í¬ë„ŒíŠ¸ì—ì„œ storeì— ìš´ë°˜í•  ë°ì´í„°ë¥¼ ë§í•¨.
- <span className='yellow-bold'>í•˜ë‚˜ì˜ ê°ì²´ë¡œ í‘œí˜„</span>
- ë¦¬ë“€ì„œê°€ ìˆ˜í–‰í•  ì‘ì—…ì„ ì„¤ëª…

```jsx
{
	type: 'CHANGE_INPUT',
	text: 'ì•ˆë…•í•˜ì„¸ìš”',
}
```

### 3. Dispatch

- ì•¡ì…˜ì„ ë°œìƒì‹œí‚¤ëŠ” ê²ƒ
- dispatch(action)ê³¼ ê°™ì€ í˜•íƒœë¡œ <span className='yellow-bold'>ì•¡ì…˜ ê°ì²´</span>ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ì„œ í˜¸ì¶œ

### 4. Reducer

- ë¦¬ë“€ì„œëŠ” <span className='yellow-bold'>ì•¡ì…˜ì˜ typeì— ë”°ë¼ ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜</span>
- ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” í˜„ì¬ ìƒíƒœê°’, ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” action ê°’ì„ ë°›ëŠ”ë‹¤.
- Http ìš”ì²­, ë°ì´í„° ì €ì¥ ê°™ì€ê±´ í•  ìˆ˜ ì—†ë‹¤.-
- í•­ìƒ ìƒˆë¡œìš´ ìƒíƒœ ê°ì²´ë¥¼ ë°˜í™˜

### ğŸ§‘ğŸ»â€ğŸ’»Â ì‚¬ìš© ì˜ˆì‹œ Â (Vanilia JS)

```jsx
// ///////////////////////////////
// Reduxë¥¼ ì´ìš©í•œ ìˆ«ìì¦ê°€, ê°ì†Œ ì½”ë“œ

// Reducer
const countReducer = (state = 0, action) => {
  switch(action.type){
    case 'ADD':
      return state += 1;
    case 'MINUS':
      return state -= 1;
    default:
      // throw new Error('unknown type');
      return state;
  }
}

// store: ë°ì´í„°ë¥¼ ë„£ëŠ”ê³³
// createStore: store ìƒì„±, íŒŒë¼ë¯¸í„°ë¡œ ë¦¬ë“€ì„œ í•¨ìˆ˜ í•„ìˆ˜ (ì—†ìœ¼ë©´ ì˜¤ë¥˜ë‚¨)
const countStore = createStore(countReducer);
const ADD = 'ADD';
const MINUS = 'MINUS'
// subscribe()ëŠ” ë°ì´í„°ì™€ ì €ì¥ì†Œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰
countStore.subscribe(() => {
  // getState()ëŠ” ì €ì¥ì†Œì—ì„œ ìµœì‹ ìƒíƒœì˜ ê°’ì„ ë°˜í™˜í• ë•Œ ì“°ëŠ” ë©”ì†Œë“œ
  num.textContent = countStore.getState();
});

add.addEventListener("click", () => {
  countStore.dispatch({type: ADD});
});

minus.addEventListener("click", () => {
  countStore.dispatch({type: MINUS});
});
```

<div className='flex justify-center'>![redux3](https://github.com/cheolung12/blog-static/assets/109952479/8408ed82-bfed-4efc-8606-1550dceea14d)</div>

---

# ğŸ› ï¸Â Redux Toolkit (React)

react-reduxì˜ ê²½ìš° `getState()` â†’ `useSelector()`, `dispatch` â†’ `useDispatch()`

ì´ ìƒíƒœì—ì„œ ì¢€ ë” í¸ì˜ì„±ì„ ë”í•œê²Œ íˆ´í‚·ì„

```bash
npm install redux react-redux @reduxjs/toolkit
```

<span className='highlight'>Reduxì˜ ë³µì¡ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ë„êµ¬ë¡œ ì•¡ì…˜ ìƒì„±, ë¦¬ë“€ì„œ, ë¯¸ë“¤ì›¨ì–´ë“± Reduxì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ êµ¬í˜„</span>

![redux4](https://github.com/cheolung12/blog-static/assets/109952479/f7c435fd-92be-4409-86d5-9a18ef8455a1)

ì´ë ‡ê²Œ ìŠ¤í† ì–´ë“¤ì„ ì»´í¬ë„ŒíŠ¸í™”í•´ì„œ ë°ì´í„°ë¥¼ ë¿Œë ¤ë³´ê² ë‹¤

## ìŠ¤í† ì–´ ì ìš©

```jsx:index.js
...
import { Provider } from 'react-redux';
import store from './store';

const root = ReactDom.createRoot(document.getElementById('root'));

root.render(
    <Provider store={store}>
      <App />
    </Provider>
);
```

```jsx:src/store/index.js
import { configureStore } from '@reduxjs/toolkit';
import counterSlice from './counter';
import loginSlice from './login';

const store = configureStore({
  reducer: {counter: counterSlice, login: loginSlice},
});

export default store;
```

`configureStore` 

- Redux ìŠ¤í† ì–´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í•¨ìˆ˜
- ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ì™€ ë¦¬ë“€ì„œë¥¼ ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆìœ¼ë©°, Redux DevTools í™•ì¥ í”„ë¡œê·¸ë˜ëª¨ê°€ì˜ í†µí•©ë„ ì œê³µ


```jsx:src/store/counter.js
import { createSlice } from '@reduxjs/toolkit';

// ê´€ë¦¬í•  ìƒíƒœì˜ ì´ˆê¸°ê°’ ëª…ì‹œ
const initCount = {
  counter: 10,
};

// createSlice(): ë¦¬ë“€ì„œì™€ ì•¡ì…˜ì„ í•¨ê»˜ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
const counterSlice = createSlice({
  name: 'counter',
  initialState: initCount,
  reducers: {
    increment(state) {
      // stateì§€ë§Œ ìˆ˜ì •í•˜ë“¯ì´ ë³€ê²½ ê°€ëŠ¥
      state.counter++;
    }, 
    decrement(state) {
      state.counter--;
    },
    calc(state, action) {
      console.log(action);
    },
  },
});

export const counterAction = counterSlice.actions;
export default counterSlice.reducer;
```

`createSlice()` 

- ë¦¬ë“€ì„œì™€ ì•¡ì…˜ì„ í•¨ê»˜ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
- ìŠ¬ë¼ì´ìŠ¤ë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì…˜íƒ€ì…, ì•¡ì…˜ ìƒì„± í•¨ìˆ˜, ë¦¬ë“€ì„œë¥¼ í•œ ë²ˆì— ì •ì˜

```jsx:src/store/login.js
import { createSlice } from '@reduxjs/toolkit';

const initLoginState = {
    isLogin: false,
}

const loginSlice = createSlice({
    name: 'login',
    initialState: initLoginState,
    reducers: {
        login(state) {
            state.isLogin = true;
        },
        logout(state) {
            state.isLogin = false;
        }
    }
});

export const loginAction = loginSlice.actions;
export default loginSlice.reducer;

```

## ì‚¬ìš© (src/Counter.jsx)

```jsx
import React from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { counterAction } from './store/counter';

export default function Counter() {
    const number = useSelector((state) => state.counter.counter);
    console.log(number);
    const dispatch = useDispatch();
    const add = () => {
        dispatch(counterAction.increment());
    }
    const minus = () => {
        dispatch(counterAction.decrement());
    }
    const calc = () => {
        dispatch(counterAction.calc({a: 1, b: 3}));
    }

    return (
        <div>
            <h2>{number}</h2>
            <button onClick={add}>ADD</button>
            <button onClick={minus}>MINUS</button>
            <button onClick={calc}>cal</button>
        </div>
    );
}
```

- ì¹´ìš´í„°ë§Œ ì‚¬ìš©ì˜ˆì‹œ ì ê² ìŒ ë¡œê·¸ì¸ì€ ì•Œì•„ì„œ ì ìš©í•´ë³´ëŠ”ê±¸ë¡œ
- `useSelector` ë¡œ ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì“´ë‹¤
- `useDispatch` ë¥¼ í™œìš©í•´ ìƒíƒœ ë³€ê²½

![redux6](https://github.com/cheolung12/blog-static/assets/109952479/e4769dce-90fd-4173-a0ea-c9c26f161557)

â†’ ì¸ìë¡œ ê°€ì ¸ì˜¨ ë°ì´í„°ë“¤ì€ actionê°ì²´ì˜ `payload`ì— ë‹´ê²¨ì ¸ ì˜¨ë‹¤.