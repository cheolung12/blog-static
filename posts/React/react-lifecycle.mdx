---
title: 'Life Cycle'
date: '2023-09-20'
description: 'í´ë˜ìŠ¤í˜•, í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°, Life Cycle Method, useEffect, useEffect ë¹„ë™ê¸°'
category: 'React'
thumbnail: '/thumbnail/react.png'
---

## ëª©ì°¨

# â™»ï¸Â ëª¨ë“  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ì¡´ì¬í•˜ëŠ” ìƒëª… ì£¼ê¸°

- **Mount** : ì»´í¬ë„ŒíŠ¸ê°€ ìµœì´ˆë¡œ ë‚˜íƒ€ë‚  ë•Œ
- **Update**: ì—…ë°ì´íŠ¸í•  ë•Œ
- **Rendering** : ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ëœ í›„ ë‹¤ì‹œ í˜¸ì¶œë  ë•Œ
- **UnMount** : ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ

---

# â™½ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ìƒëª…ì£¼ê¸°

```jsx
class MyComponent extends React.Component {
  // ìƒì„±ë  ë•Œ í˜¸ì¶œ
  componentDidMount() {
    console.log('Mount!');
  }
  // ì—…ë°ì´íŠ¸ë  ë•Œ í˜¸ì¶œ
  componentDidUpdate() {
    console.log('Update!!');
  }
  // ì œê±°ë  ë•Œ í˜¸ì¶œ
  componentWillUnmount() {
    console.log('Unmmount');
  }

  render() {
    return (
      <>
        <div>My Component {this.props.number}</div>
      </>
    );
  }
}

... 

// ì‚¬ìš©ì½”ë“œ
```
- `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`ë“± <u>lifecycle method</u>ë“¤ì„ ì œê³µí•œë‹¤.

---

# â™¼ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ìƒëª…ì£¼ê¸°

## â­ï¸ useEffect

> useEffectë€ ë¦¬ì•¡íŠ¸ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” í•¨ìˆ˜ë¡œì¨, useEffectí•¨ìˆ˜ê°€ í¬í•¨ëœ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë˜ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œ, ë˜ëŠ” ì„ ì–¸ëœ ë³€ìˆ˜ì˜ ê°’ì´ ë³€ê²½ë˜ê±°ë‚˜ redux storeì˜ ê°’ì´ ë³€ê²½ë  ë•Œ ì‹¤í–‰í•  êµ¬ë¬¸ë“¤ì„ ì •ì˜í•´ë†“ì€ í•¨ìˆ˜ì´ë‹¤.
    
=> ì¦‰, **<span className='highlight'>lifecycle methodë“¤ì˜ ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ë¡œ í†µí•©í•´ì„œ ì œê³µí•œë‹¤.</span>**

```jsx
import { useEffect } from 'react';

// 1. ê¸°ë³¸í˜•íƒœ
useEffect(() => {
	// ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸, ì–¸ë§ˆìš´íŠ¸ ë˜ê¸° ì „
});

// 2. ë¹„ì–´ìˆëŠ” dependency ì¶”ê°€
useEffect(() => {
	// componentDidMount: ìµœì´ˆ ë Œë”ë§
}, []);

// 3. dependency ê°’ ì¶”ê°€
const [ stateA, setSateA ] = useState(1);

useEffect(() => {
  // dependencyì˜ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ (componentWillUpdate)
}, [stateA]);

// 4. cleanup í•¨ìˆ˜
useEffect(() => {
  // ...
  
  // cleanup í•¨ìˆ˜
  return () => {
    // componentWillUnmount: ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ
  }
});
```
1. ìœ„ì™€ ê°™ì´ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ê²½ìš°ì— í•´ë‹¹ useEffectí•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. 
2. ìœ„ì˜ ê²½ìš°ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒìœ¼ë¡œ ë§ˆìš´íŒ… ë˜ì—ˆì„ ë•Œ ì‹¤í–‰ëœë‹¤. ì´ˆê¸°ì— í•œ ë²ˆ ì‹¤í–‰í•  ì‘ì—…ë“¤ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©
3. dependency íŒŒë¼ë¯¸í„° ê°’ì— ì˜ì¡´í•˜ì—¬ useEffectí•¨ìˆ˜ê°€ ì‹¤í–‰ë ì§€ ë§ì§€ ê²°ì •í•œë‹¤. (í•´ë‹¹ ë³€ìˆ˜ì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰)
4. cleanup í•¨ìˆ˜ëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ë¡œ ë©”ëª¨ë¦¬ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ì—¬ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ í•˜ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ìˆ˜í–‰í•  ì‘ì—…ë“¤ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

## ğŸ§‘ğŸ»â€ğŸ’» ì½”ë“œ ì˜ˆì‹œ

```jsx
export function LifeCycleFunc() {
  const [number, setNumber] = useState(0);
  const [visible, setVisible] = useState(true);

  const changeNumberState = () => {
    setNumber((prev) => prev + 1);
  };

  const changeVisibleState = () => {
    setVisible((prev) => !prev);
  };

  return (
    <div>
      <button onClick={changeNumberState}>PLUS</button>
      <button onClick={changeVisibleState}>ON/OFF</button>
      {visible && <MyComponent number={number} />}
    </div>
  );
}

function MyComponent({ number }) {
  const [text, setText] = useState('');

  useEffect(() => {
    console.log('í•­ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤');
  });

  useEffect(() => {
    console.log('ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„± ë ë•Œ ì‹¤í–‰');
    // cleanup
    return () => {
      console.log('ì œê±°ë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤');
    };
  }, []);

  useEffect(() => {
    console.log('input ë³€ê²½ë  ë•Œ ì‹¤í–‰');
  }, [text]);

  // ìµœì´ˆì— ë¬´ì¡°ê±´ í•œë²ˆì”©ì€ ë‹¤ ì‹¤í–‰ë¨ (cleanupí•¨ìˆ˜ ë¹¼ê³ )

  return (
    <div>
      <div>My Component {number}</div>
      <input type='text' value={text} onChange={(e) => setText(e.target.value)}/>
    </div>
  );
}
```
<br />

## ğŸš¨ `useEffect` ëŠ” ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤!

### âŒ ì˜ëª»ëœ ì˜ˆì‹œ
```jsx
useEffect(async () => {
 // ...
}, []);
```

### âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
```jsx
useEffect(() => {
    // useEffectëŠ” ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠìŒ
    // ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‚´ë¶€ì— ë¹„ë™ê¸°í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ë°”ë¡œ í˜¸ì¶œ
    const fetchData = async () => {
        const res = await axios({
        method: 'GET',
        url: 'https://jsonplaceholder.typicode.com/users',
        });
        // let res = await axios.get('https://jsonplaceholder.typicode.com/users');
        setUserList(res.data);
        setIsLoading(true);
    };
    fetchData();
    return () => {
        console.log('ì—°ê²°í•´ì œ ì™„ë£Œ');
    };
    }, []);
```

ì´ì™€ ê°™ì´ useEffectì•ˆì— ë”°ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•´ì•¼í•¨!

### ğŸ¤” ì´ìœ ?
useEffectì˜ ê²½ìš° <span className='highlight emphasis'>cleanup í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ë§ì•„ì•¼ í•œë‹¤.</span>

ì´ ë•Œ ì˜ëª»ëœ ì˜ˆì‹œì™€ ê°™ì´ ì¸ìë¡œ ë“¤ì–´ê°€ëŠ” ì½œë°±í•¨ìˆ˜ì— asyncë¥¼ ì¤˜ë²„ë¦°ë‹¤ë©´ <span className='red-bold'>promise ê°ì²´ê°€ ë°˜í™˜</span>ë˜ì–´ ì²˜ë¦¬ê°€ ë˜ì§€ ì•ŠëŠ”ê²ƒì´ë‹¤.

ë”°ë¼ì„œ <span className='blue-bold'>useEffect ì¸ì ë‚´ë¶€ì— í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.</span>



