---
title: 'Heap - JavaScript'
date: '2023-11-04'
description: 'Heap ì•Œê³ ë¦¬ì¦˜, ì‹œê°„ë³µì¡ë„, ì½”ë“œ(js)'
category: 'Algorithm'
thumbnail: '/thumbnail/algorithm.png'
---

## ëª©ì°¨

# ğŸ“ŒÂ Heap ì´ë€?

- ë°ì´í„°ì—ì„œ ìµœëŒ€ê°’ê³¼ ìµœì†Œê°’ì„ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•´ ê³ ì•ˆëœ ì™„ì „ ì´ì§„íŠ¸ë¦¬
    - ì™„ì „ ì´ì§„íŠ¸ë¦¬ (Complete binary Tree) : ì™¼ìª½ë¶€í„° ë¹ˆ ê³µê°„ ì—†ì´ ì±„ì›Œë‚˜ê°€ëŠ” ì´ì§„íŠ¸ë¦¬
- ì¢Œ, ìš° ìœ„ì¹˜ê°€ ëŒ€ì†Œ ê´€ê³„ë¥¼ ë°˜ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. (ì¸µìœ¼ë¡œ ëŒ€ì†Œ ê´€ê³„ë¥¼ êµ¬ë¶„)
- ìš°ì„ ìˆœìœ„ í (Priority Queue)ë¥¼ êµ¬í˜„í•  ë•Œ ì‚¬ìš©
    - ìš°ì„ ìˆœìœ„ í : íì˜ ê¸°ì¡´ ê·œì¹™ì´ FIFOê°€ ì•„ë‹Œ ì¼ì •í•œ ê·œì¹™ì— ì˜í•´ ë¨¼ì € ë‚˜ê°€ëŠ” ìˆ«ìê°€ ì •í•´ì§€ëŠ” ê²ƒ

# ğŸ“ŒÂ Heap ì¢…ë¥˜ (ê·œì¹™)

1. Min Heap (ìµœì†Œ í™) : ë¶€ëª¨ ë…¸ë“œì˜ ê°’ì´ ìì‹ ë…¸ë“œì˜ ê°’ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ í™
2. Max Heap (ìµœëŒ€ í™) : ë¶€ëª¨ ë…¸ë“œì˜ ê°’ì´ ìì‹ ë…¸ë“œì˜ ê°’ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ í™

![heap](https://github.com/cheolung12/cheolung.dev/assets/109952479/2aa97d65-67c8-469c-9d04-551ba9754898)

# ğŸ“ŒÂ Push, PoP (ì‚½ì…, ì‚­ì œ)

- `9, 7, 5, 1, 3` ì˜ ë°ì´í„°ê°€ heap ì— ìˆë‹¤ê³  ê°€ì •
- MaxHeap ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…
- ì‚½ì…, ì‚­ì œ í›„ Min/Max Heapìœ¼ë¡œ ê³ ì¹˜ëŠ” ê³¼ì •ì„ Heapifyë¼ê³  í•¨

## push() â‡’  ë¶€ëª¨ë…¸ë“œì™€ ë¹„êµí›„ swap

ex) push(11)

![heap4](https://github.com/cheolung12/cheolung.dev/assets/109952479/a62246b4-0741-4949-815b-43538a0637d0)


## pop()

1. **í•´ë‹¹ ìœ„ì¹˜ì— í™ì˜ ë§ˆì§€ë§‰ì— ìˆëŠ” ë…¸ë“œë¥¼ ìœ„ì¹˜ ì‹œí‚´**
2. **ìƒˆë¡œ ë“¤ì–´ì˜¨ ë…¸ë“œì™€ children ë…¸ë“œë“¤ì„ ë¹„êµí•´ì„œ ê·¸ ì¤‘ í° ìˆ«ìì™€ swap**

ex) pop(9)

![heap2](https://github.com/cheolung12/cheolung.dev/assets/109952479/98b290c4-6d7b-4a44-bb63-1b48acc58e50)

# ğŸ“ŒÂ ì„±ì§ˆ, ì‹œê°„ë³µì¡ë„

<div className='flex justify-center'><img src='https://github.com/cheolung12/cheolung.dev/assets/109952479/c7333a99-2ef7-4ac4-af5e-5596e78df0cb' alt='heap3' style={{ width: '12rem', height: 'auto' }}   /></div>

ìœ„ì˜ íŠ¸ë¦¬ë¥¼ ë°°ì—´ë¡œ ë‚˜íƒ€ë‚¸ë‹¤ë©´ 

```jsx
let arr = [9, 7, 5, 1 ,3]
// ì¸ë±ìŠ¤    0  1  2  3  4
```

## ğŸ”Â **index êµ¬í•˜ê¸°**

íŠ¹ì • ë…¸ë“œì—ì„œ ë¶€ëª¨ë…¸ë“œë¡œ : `**idx - 1 / 2**`  <span className='red-bold'>(ê²°ê³¼ê°€ ì†Œìˆ˜ì¼ ê²½ìš° ë‚´ë¦¼)</span>

ex) 3ì¼ ê²½ìš° index â†’ 4 ì´ë¯€ë¡œ 4-1 / 2 = 1.5 â‡’ 1 

ë¶€ëª¨ ë…¸ë“œì—ì„œ left childë¡œ : `**2 * idx + 1`** 

ex) 7ì˜ ê²½ìš° index â†’ 1 ì´ë¯€ë¡œ 2*1 + 1 â‡’ 3 

ë¶€ëª¨ ë…¸ë“œì—ì„œ right childë¡œ : **`2 * idx + 2`** 

ex) 7ì˜ ê²½ìš° index â†’ 1 ì´ë¯€ë¡œ 2*1 + 2 â‡’ 4 

## ğŸ•°ï¸Â ì‹œê°„ ë³µì¡ë„

Root ë…¸ë“œì— ì ‘ê·¼í•˜ëŠ” ì‹œê°„ (Max ê°’ or Min ê°’) : <span className='blue-bold'>O(1)</span>

Build Heap - í™ì„ ë§Œë“œëŠ”ë° í•„ìš”í•œ ì‹œê°„ : <span className='blue-bold'>O(N)</span>

 ì‚½ì…, ì‚­ì œ : <span className='blue-bold'>O(logN)</span>

# ğŸ› Â êµ¬í˜„

```jsx
class MinHeap {
    constructor() {
        this.heap = [];
    }
    size() {
        return this.heap.length;
    }

    swap(idx1, idx2){
        [this.heap[idx1], this.heap[idx2]] = [this.heap[idx2], this.heap[idx1]];
        return this.heap;
    }

    getParentIdx(childIdx){
        return Math.floor((childIdx-1) / 2);
    }

    getLeftChildIdx(parentIdx){
        return parentIdx*2 + 1;
    }

    getRightChildIdx(parentIdx){
        return parentIdx*2 + 2;
    }

    heappop(){
        const heapSize = this.size();
        if (!heapSize) return null;
        if (heapSize === 1) return this.heap.pop();

        const value = this.heap[0];
        this.heap[0] = this.heap.pop();
        this.bubbledown();
        return value;
    }

    heappush(value){
        this.heap.push(value);
        this.bubbleup();

        return this.heap;
    }

    bubbleup() {
        let child = this.size()-1;
        let parent = this.getParentIdx(child);

        while(this.heap[child] < this.heap[parent]){
            this.swap(child, parent);
            child = parent;
            parent = this.getParentIdx(parent);
        }
    }

    bubbledown() {
        let parent = 0;
        let leftChild = this.getLeftChildIdx(parent);
        let rightChild = this.getRightChildIdx(parent);

        while((leftChild <= this.size()-1 && this.heap[leftChild] < this.heap[parent]) || (rightChild <= this.size()-1 && this.heap[rightChild] < this.heap[parent])){

            if (rightChild <= this.size()-1 && this.heap[leftChild] > this.heap[rightChild]){
                this.swap(parent, rightChild);
                parent = rightChild;
            }else {
                this.swap(parent, leftChild);
                parent = leftChild;
            }
            leftChild = this.getLeftChildIdx(parent);
            rightChild = this.getRightChildIdx(parent);
        }     
    }
}
```

## ğŸ“‘Â ì°¸ê³  ìë£Œ

[ì½”ë”©í…ŒìŠ¤íŠ¸, ê¸°ì´ˆ, heap ì†Œê°œ](https://www.youtube.com/watch?v=Zl07LUsR6P0)

[[ì•Œê³ ë¦¬ì¦˜, ìë£Œêµ¬ì¡°] í™ Heap ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬í˜„í•˜ê¸°](https://algoroot.tistory.com/m/69)